<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - Smith Team Six</title>
    <link rel="stylesheet" href="../style.css">
    <style>
        .settings-container {
            max-width: 1200px;
        }
        
        /* Tab Navigation */
        .settings-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid #e0e0e0;
            flex-wrap: wrap;
        }
        
        .settings-tab {
            padding: 12px 24px;
            background: transparent;
            border: none;
            border-bottom: 3px solid transparent;
            font-size: 1rem;
            font-weight: 600;
            color: #666;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            top: 2px;
        }
        
        .settings-tab:hover {
            color: #DAA520;
            background: rgba(218, 165, 32, 0.05);
        }
        
        .settings-tab.active {
            color: #CC5500;
            border-bottom-color: #CC5500;
        }
        
        /* Tab Content */
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .settings-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }
        
        .settings-section h2 {
            margin-top: 0;
            color: #CC5500;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 15px;
            margin-bottom: 20px;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #666;
        }
        
        .input-group input[type="password"],
        .input-group input[type="text"],
        .input-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
        }
        
        .input-group input[type="password"]:focus,
        .input-group input[type="text"]:focus,
        .input-group select:focus {
            border-color: #DAA520;
            outline: none;
        }
        
        .input-group .help-text {
            font-size: 0.9rem;
            color: #999;
            margin-top: 5px;
        }
        
        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: none;
        }
        
        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: none;
        }
        
        /* User Management Styles */
        .users-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .users-table th {
            background: linear-gradient(135deg, #DAA520 0%, #CC5500 100%);
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }
        
        .users-table td {
            padding: 12px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .users-table tr:last-child td {
            border-bottom: none;
        }
        
        .users-table tr:hover {
            background: #f8f9fa;
        }
        
        .users-table .suspended {
            color: #dc3545;
            font-weight: 600;
        }
        
        .users-table .active {
            color: #28a745;
            font-weight: 600;
        }
        
        .action-buttons {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .btn-small {
            padding: 5px 12px;
            font-size: 0.85rem;
        }
        
        .add-user-form {
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .no-users {
            text-align: center;
            padding: 40px;
            color: #999;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="container settings-container">
        <header>
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <div style="display: flex; align-items: center; gap: 15px;">
                    <h1 style="margin: 0; background: linear-gradient(135deg, #DAA520 0%, #CC5500 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Settings</h1>
                </div>
                <div style="display: flex; align-items: center; gap: 15px;">
                    <!-- Profile menu will be inserted here -->
                </div>
            </div>
        </header>
        
        <div id="authCheck" style="text-align: center; padding: 40px;">
            <p>Checking authentication...</p>
        </div>

        <div id="mainContent" class="hidden">
            <div class="success-message" id="successMessage"></div>
            <div class="error-message" id="errorMessage"></div>
            
            <!-- Tab Navigation -->
            <div class="settings-tabs">
                <button class="settings-tab active" data-tab="password" id="passwordTabBtn">General Settings</button>
                <button class="settings-tab" data-tab="general" id="generalTabBtn">Change Password</button>
                <button class="settings-tab" data-tab="users" id="usersTabBtn">User Management</button>
                <button class="settings-tab" data-tab="memory" id="memoryTabBtn">Monthly Memory Verse</button>
                <!-- Future tabs can be added here -->
            </div>
            
            <!-- General Settings Tab (Pin Code and Launch Time) -->
            <div id="passwordTab" class="tab-content active">
                <div class="settings-section">
                    <h2>Pin Code</h2>
                    <p style="color: #666; margin-bottom: 20px;">
                        Set a pin code that will be required to post checklist changes and award credits. 
                        This pin code helps ensure only authorized admins can post checklist updates.
                    </p>
                    
                    <div class="input-group">
                        <label for="checklistCode">Pin Code:</label>
                        <input type="password" id="checklistCode" placeholder="Enter pin code (leave blank to keep current)" maxlength="8" pattern="[0-9]*" inputmode="numeric">
                        <div class="help-text">Enter a new pin code (4-8 digits) to change it, or leave blank to keep your current pin code.</div>
                    </div>
                    
                    <div class="input-group">
                        <label for="confirmCode">Confirm Pin Code:</label>
                        <input type="password" id="confirmCode" placeholder="Confirm pin code" maxlength="8" pattern="[0-9]*" inputmode="numeric">
                    </div>
                    
                    <button id="saveCodeBtn" class="btn btn-primary" style="width: 100%; padding: 12px; font-size: 1.1rem;">
                        Save Pin Code
                    </button>
                </div>
                
                <div class="settings-section">
                    <h2>Launch Time</h2>
                    <p style="color: #666; margin-bottom: 20px;">
                        Set the launch time for the morning checklist countdown timer (default: 0700).
                    </p>
                    
                    <div class="input-group">
                        <label for="launchTimeSetting">Launch Time (Military Format):</label>
                        <input type="text" id="launchTimeSetting" placeholder="0700" maxlength="4" pattern="[0-9]{4}">
                        <div class="help-text">Enter time in military format (HHMM), e.g., 0700 for 7:00 AM, 1300 for 1:00 PM</div>
                    </div>
                    
                    <button id="saveLaunchTimeBtn" class="btn btn-primary" style="width: 100%; padding: 12px; font-size: 1.1rem;">
                        Save Launch Time
                    </button>
                </div>
            </div>
            
            <!-- Change Password Tab -->
            <div id="generalTab" class="tab-content">
                <div class="settings-section">
                    <h2>Change Password</h2>
                    <p style="color: #666; margin-bottom: 20px;">
                        Update your account password. You'll need to enter your current password to make changes.
                    </p>
                    
                    <div class="input-group">
                        <label for="currentPassword">Current Password:</label>
                        <input type="password" id="currentPassword" placeholder="Enter your current password" required>
                    </div>
                    
                    <div class="input-group">
                        <label for="newPassword">New Password:</label>
                        <input type="password" id="newPassword" placeholder="Enter new password" required>
                        <div class="help-text">Choose a strong password that you haven't used before.</div>
                    </div>
                    
                    <div class="input-group">
                        <label for="confirmNewPassword">Confirm New Password:</label>
                        <input type="password" id="confirmNewPassword" placeholder="Confirm new password" required>
                    </div>
                    
                    <button id="savePasswordBtn" class="btn btn-primary" style="width: 100%; padding: 12px; font-size: 1.1rem;">
                        Change Password
                    </button>
                </div>
            </div>
            
            <!-- User Management Tab -->
            <div id="usersTab" class="tab-content">
                <!-- Add User Section -->
                <div class="settings-section">
                    <h2>Add New User</h2>
                    <div class="add-user-form">
                        <div class="form-row">
                            <div class="input-group">
                                <label for="newUsername">Username *</label>
                                <input type="text" id="newUsername" class="input" required>
                            </div>
                            <div class="input-group">
                                <label for="newPassword">Password *</label>
                                <input type="password" id="newPassword" class="input" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="input-group">
                                <label for="newFirstName">First Name</label>
                                <input type="text" id="newFirstName" class="input">
                            </div>
                            <div class="input-group">
                                <label for="newLastName">Last Name</label>
                                <input type="text" id="newLastName" class="input">
                            </div>
                        </div>
                        <div class="input-group">
                            <label for="newUserType">User Type *</label>
                            <select id="newUserType" class="input" required>
                                <option value="standard">Standard</option>
                                <option value="admin">Admin</option>
                            </select>
                        </div>
                        <button id="addUserBtn" class="btn btn-primary" style="margin-top: 15px;">Add User</button>
                    </div>
                </div>
                
                <!-- Users List Section -->
                <div class="settings-section">
                    <h2>All Users</h2>
                    <div id="usersList">
                        <div class="loading">Loading users...</div>
                    </div>
                </div>
            </div>
            
            <!-- Monthly Memory Verse Tab -->
            <div id="memoryTab" class="tab-content">
                <div class="settings-section">
                    <h2>Monthly Memory Verse</h2>
                    <p style="color: #666; margin-bottom: 20px;">
                        Set a memory verse for a specific month. Users can memorize the verse and earn 30 credits upon approval.
                    </p>
                    
                    <!-- Add Memory Verse Form (Hidden by default) -->
                    <div id="addMemoryVerseForm" style="display: none;">
                        <div class="form-row">
                            <div class="input-group">
                                <label for="memoryVerseMonth">Month:</label>
                                <select id="memoryVerseMonth" required>
                                    <option value="">Select month...</option>
                                    <option value="01">January</option>
                                    <option value="02">February</option>
                                    <option value="03">March</option>
                                    <option value="04">April</option>
                                    <option value="05">May</option>
                                    <option value="06">June</option>
                                    <option value="07">July</option>
                                    <option value="08">August</option>
                                    <option value="09">September</option>
                                    <option value="10">October</option>
                                    <option value="11">November</option>
                                    <option value="12">December</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label for="memoryVerseYear">Year:</label>
                                <select id="memoryVerseYear" required>
                                    <option value="">Select year...</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="input-group">
                                <label for="startBook">Starting Book:</label>
                                <select id="startBook" required>
                                    <option value="">Select a book...</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label for="startChapter">Starting Chapter:</label>
                                <input type="number" id="startChapter" min="1" required>
                            </div>
                            <div class="input-group">
                                <label for="startVerse">Starting Verse:</label>
                                <input type="number" id="startVerse" min="1" required>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="input-group">
                                <label for="endBook">Ending Book:</label>
                                <select id="endBook" required>
                                    <option value="">Select a book...</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label for="endChapter">Ending Chapter:</label>
                                <input type="number" id="endChapter" min="1" required>
                            </div>
                            <div class="input-group">
                                <label for="endVerse">Ending Verse:</label>
                                <input type="number" id="endVerse" min="1" required>
                            </div>
                        </div>
                        
                        <button id="saveMemoryVerseBtn" class="btn btn-primary" style="width: 100%; padding: 12px; font-size: 1.1rem;">
                            Add Verse
                        </button>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h2>Current Memory Verses</h2>
                    <div id="memoryVersesList">
                        <div class="loading">Loading memory verses...</div>
                    </div>
                    <button id="showAddMemoryVerseBtn" class="btn btn-primary" style="width: 100%; padding: 12px; font-size: 1.1rem; margin-top: 20px;">
                        Add Memory Verse
                    </button>
                </div>
            </div>
            
            <!-- Future tabs can be added here -->
        </div>
    </div>

    <footer class="page-footer">
        <p>Designed in Orlando by the Smith Kids</p>
    </footer>

    <script type="module" src="../js/auth.js"></script>
    <script type="module" src="../js/profile-menu.js"></script>
    <script type="module" src="../js/settings.js"></script>
</body>
</html>

